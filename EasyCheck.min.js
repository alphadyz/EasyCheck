// jQuery EasyCheck Plugin
//
// Version 1.8
//
// Copy By RAY
// in.think@163.com
// 2012
//
var EasyCheck={"loadChk":true,"blurChk":true,"keyupChk":true,"email":/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,"url":/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,"number":/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/,"digits":/^\d+$/,"English":/^[A-Za-z]+$/,"Chinese":/^[\u0391-\uFFE5]+$/,"Zip":/^[1-9]\d{5}$/,"Currency":/^\d+(\.\d+)?$/,"Require":/.+/,"ipv4":/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i,"ipv6":/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/,"showError":function(o,msg){var eo=$("[id*='error_"+$(o).attr("name")+"']");if(eo.size()==0){$(o).after("<div id='error_"+$(o).attr("name")+"'></div>");eo=$("[id='error_"+$(o).attr("name")+"']")}eo.removeClass();eo.addClass("easycheck_errorInfo");$(o).removeClass();$(o).addClass("easycheck_errorInput");var info=eo.attr("info");if(info)eo.html(info+msg);else eo.html(msg);eo.show()},"clearError":function(o,msg){var eo=$("[id='error_"+$(o).attr("name")+"']");if(eo){eo.removeClass();$(o).removeClass("easycheck_errorInput");$(o).addClass("easycheck_okInput");eo.addClass("easycheck_okInfo");if(msg)eo.html(msg);else eo.html("");eo.hide()}},"clearAllError":function(){$("[id^='error_']").each(function(){var oName=$(this).attr("id").replace("error_","");var n=$("[name='"+oName+"']");n.removeClass("easycheck_errorInfo");n.addClass("easycheck_okInput")});$("[id^='error_']").hide("")},"formatMsg":function(){var ary=[];for(i=1;i<arguments.length;i++)ary.push(arguments[i]);return arguments[0].replace(/\{(\d+)\}/g,function(m,i){return ary[i]})},"addChkMethod":function(o,e,chkCode,msg){if(!chkCode(o)){EasyCheck.showError(o,msg);if(e)e.stopImmediatePropagation();return false}else{EasyCheck.clearError(o);return true}},"ChkRule":function(chkName,chkFunction,chkAttr){this.chkName=chkName;this.chkFunction=chkFunction;this.chkAttr=chkAttr},"chkList":"","msg":{"required":"\u4e0d\u80fd\u4e3a\u7a7a","email":"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e","url":"\u7f51\u5740\u6709\u8bef","number":"\u5fc5\u987b\u4e3a\u6570\u5b57","digits":"\u5fc5\u987b\u4e3a\u6574\u6570","equalto":"\u8f93\u5165\u4e0d\u4e00\u81f4","equallength":"\u957f\u5ea6\u5fc5\u987b\u4e3a{0}\u4f4d","minlength][maxlength":"\u957f\u5ea6\u5fc5\u987b\u5728{0}\u5230{1}\u4e4b\u95f4","minlength":"\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e{0}","maxlength":"\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e{0}","min][max":"\u503c\u5fc5\u987b\u5728{0}\u548c{1}\u4e4b\u95f4","min":"\u4e0d\u80fd\u5c0f\u4e8e{0}","max":"\u4e0d\u80fd\u5927\u4e8e{0}","regExp":"\u683c\u5f0f\u6709\u8bef","extension":"\u6587\u4ef6\u6269\u5c55\u540d\u53ea\u80fd\u4e3a{0}","vc":"\u8f93\u5165\u6709\u8bef"},"easyCheckIgnore":{},"easyCheckBlurIgnore":{},"easyCheckKeyupIgnore":{},"easyCheckEleIgnore":{},"easyCheckSubmitDisable":true,"removeDisableBtn":[],"removeDisableForm":[],"removeDisable":false};EasyCheck.chkList=[new EasyCheck.ChkRule("required",checkRequired),new EasyCheck.ChkRule("email",checkEmail),new EasyCheck.ChkRule("url",checkUrl),new EasyCheck.ChkRule("number",checkNumber),new EasyCheck.ChkRule("digits",checkDigits),new EasyCheck.ChkRule("equalto",checkEqualto,true),new EasyCheck.ChkRule("equallength",checkEquallength,true),new EasyCheck.ChkRule("minlength][maxlength",checkRangeLength,true),new EasyCheck.ChkRule("minlength",checkMinlength,true),new EasyCheck.ChkRule("maxlength",checkMaxlength,true),new EasyCheck.ChkRule("min][max",checkRange,true),new EasyCheck.ChkRule("min",checkMin,true),new EasyCheck.ChkRule("max",checkMax,true),new EasyCheck.ChkRule("reg",checkRegExp,true),new EasyCheck.ChkRule("extension",checkExtension,true),new EasyCheck.ChkRule("vc",checkVc,true)];EasyCheck.easyCheckIgnore["vc"]=true;EasyCheck.easyCheckEleIgnore["uservc"]=true;function checkExists(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();var res=false;dwr.engine.setAsync(false);UserInfoDWR.checkEmail(val,function(d){res=d});if(res=="true")CompanyInfoDWR.checkEmail(val,function(d){res=d});return res},EasyCheck.msg["exists"])}function checkVc(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();var res=false;$.ajaxSetup({"async":false});$.post($(o).attr("vc"),$(o).attr("name")+"="+val+"&n="+new Date,function(d){res=d.replace(/\r\n/g,"")},"text");return res=="true"},EasyCheck.msg["vc"])}function checkRegExp(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();var reg=new RegExp("^(?:"+$(o).attr("reg")+")$");return!($.trim(val)!=""&&!reg.test(val))},EasyCheck.msg["regExp"])}function checkExtension(o,e){ex="png,jpeg,jpg,gif";return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();ex=$(o).attr("extension");var extensionList=ex!=""?ex.replace(/,/g,"|"):"png|jpe?g|gif";return!($.trim(val)!=""&&!val.match(new RegExp(".("+extensionList+")$","i")))},EasyCheck.formatMsg(EasyCheck.msg["extension"],ex))}function checkRequired(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return $.trim(val)!=""},EasyCheck.msg["required"])}function checkEmail(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!($.trim(val)!=""&&!EasyCheck.email.test(val))},EasyCheck.msg["email"])}function checkUrl(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!($.trim(val)!=""&&!EasyCheck.url.test(val))},EasyCheck.msg["url"])}function checkNumber(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!($.trim(val)!=""&&!EasyCheck.number.test(val))},EasyCheck.msg["number"])}function checkDigits(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!($.trim(val)!=""&&!EasyCheck.digits.test(val))},EasyCheck.msg["digits"])}function checkEqualto(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!(val!=$("[id='"+$(o).attr("equalto")+"']").val())},EasyCheck.msg["equalto"])}function checkEquallength(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!(val.length!=$(o).attr("equallength"))},EasyCheck.formatMsg(EasyCheck.msg["equallength"],$(o).attr("equallength")))}function checkRangeLength(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!($.trim(val).length<$(o).attr("minlength")||$.trim(val).length>$(o).attr("maxlength"))},EasyCheck.formatMsg(EasyCheck.msg["minlength][maxlength"],$(o).attr("minlength"),$(o).attr("maxlength")))}function checkMinlength(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!($.trim(val).length<$(o).attr("minlength"))},EasyCheck.formatMsg(EasyCheck.msg["minlength"],$(o).attr("minlength")))}function checkMaxlength(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!($.trim(val).length>$(o).attr("maxlength"))},EasyCheck.formatMsg(EasyCheck.msg["maxlength"],$(o).attr("maxlength")))}function checkRange(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!(parseFloat($.trim(val))<parseFloat($(o).attr("min"))||parseFloat($.trim(val))>parseFloat($(o).attr("max"))||isNaN(val))},EasyCheck.formatMsg(EasyCheck.msg["min][max"],$(o).attr("min"),$(o).attr("max")))}function checkMin(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!(parseFloat($.trim(val))<parseFloat($(o).attr("min"))||isNaN(val))},EasyCheck.formatMsg(EasyCheck.msg["min"],$(o).attr("min")))}function checkMax(o,e){return EasyCheck.addChkMethod(o,e,function(o){var val=$(o).val();return!(parseFloat($.trim(val))>parseFloat($(o).attr("max"))||isNaN(val))},EasyCheck.formatMsg(EasyCheck.msg["min"],$(o).attr("min")))}function checkNew(o,e){return EasyCheck.addChkMethod(o,e,function(o){},"\u9a8c\u8bc1\u5931\u8d25\u65f6\u7684\u6d88\u606f\u5b57\u7b26\u4e32")}function chk(o,e,chkFunction){chkFunction(o,e)}function addChk(chkrule){var chkElements=chkrule.chkAttr?"["+chkrule.chkName+"]":"[class~='"+chkrule.chkName+"']";$(chkElements).on("blur",function(e){if(!EasyCheck.easyCheckBlurIgnore[chkrule.chkName]&&!EasyCheck.easyCheckEleIgnore[e.target.name])EasyCheck.blurChk?chk(this,e,chkrule.chkFunction):""}).on("focus",function(e){EasyCheck.clearError(this)}).on("keyup",function(e){if(!EasyCheck.easyCheckKeyupIgnore[chkrule.chkName]&&!EasyCheck.easyCheckEleIgnore[e.target.name])EasyCheck.keyupChk?chk(this,e,chkrule.chkFunction):""})}function addChkForm(chkrule,fromChkInfo){var chkElements=chkrule.chkAttr?"["+chkrule.chkName+"]":"[class~='"+chkrule.chkName+"']";$(fromChkInfo.eleArea+chkElements).each(function(index,element){if(!fromChkInfo.errorEleArray[$(element).attr("name")]){var flag=chkrule.chkFunction(element);if(!flag){fromChkInfo.errorEleArray[$(element).attr("name")]="E";fromChkInfo.chkFlag=false}}else fromChkInfo.chkFlag=false})}function easyCheck(){for(var i=0;i<EasyCheck.chkList.length;i++){var chkrule=EasyCheck.chkList[i];if(!EasyCheck.easyCheckIgnore[chkrule.chkName])addChk(chkrule)}}function easyCheckForm(eleArea){var fromChkInfo={"eleArea":"[id='"+$(eleArea).attr("id")+"'] ","chkFlag":true,"errorEleArray":new Array};for(var i=0;i<EasyCheck.chkList.length;i++){var chkrule=EasyCheck.chkList[i];addChkForm(chkrule,fromChkInfo)}if(fromChkInfo.chkFlag==true&&EasyCheck["easyCheckSubmitDisable"]==true)$(fromChkInfo.eleArea+"[type='submit']").attr("disabled","true");else $(fromChkInfo.eleArea+"[type='submit']").removeAttr("disabled");return fromChkInfo.chkFlag}$(function(){EasyCheck.loadChk?easyCheck():"";for(var i=0;i<EasyCheck.removeDisableBtn.length;i++)$("#"+EasyCheck.removeDisableBtn[i]).removeAttr("disabled");if(EasyCheck.removeDisable==true)$("form [type='submit']").removeAttr("disabled");else for(var i=0;i<EasyCheck.removeDisableForm.length;i++)$("[id='"+EasyCheck.removeDisableForm[i]+"'] [type='submit']").removeAttr("disabled")});